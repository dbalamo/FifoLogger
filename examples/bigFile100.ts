import { FifoLogger, FifoLoggerConfig, LogDestination, LogLevel } from "../src/fifoLogger";

console.log("TEST START");

const flc: FifoLoggerConfig = {
  minLogLevel: LogLevel.DEBUG,
  maxEventLength: 1024,
  destination: LogDestination.FILE,
  useColor: true,
  jsonMode: false,
  fileName: "/tmp/test.log"
}
FifoLogger.init(flc)
let i=0

const testStr = " TEST ME UP 1 2 3"
//9KB object
const bigAttachedObj = [{ "_id": "6808c4d6e8a49e584c7ac7aa",    "index": 0,    "guid": "48d85344-d65d-4407-a46b-17f55942a0e4",    "isActive": false,    "balance": "$1,133.10",    "picture": "http://placehold.it/32x32",    "age": 22,    "eyeColor": "green",    "name": "West Young",    "gender": "male",    "company": "ZAPPIX",    "email": "westyoung@zappix.com",    "phone": "+1 (848) 568-2275",    "address": "812 Beekman Place, Sheatown, Idaho, 2384",    "about": "Esse exercitation laborum consectetur proident consectetur labore proident. Laborum veniam excepteur occaecat exercitation proident tempor eiusmod eiusmod incididunt dolore aliquip. Lorem proident amet culpa laborum cillum quis ullamco minim. Officia magna dolor occaecat minim nostrud. Culpa aute quis adipisicing nulla. Nostrud dolor dolor occaecat culpa ipsum deserunt. Incididunt proident ad commodo consequat.\r\n",    "registered": "2024-09-24T01:15:15 -02:00",    "latitude": 46.360655,    "longitude": -13.928679,    "tags": [      "minim",      "ullamco",      "quis",      "mollit",      "qui",      "deserunt",      "incididunt"    ],    "friends": [      {        "id": 0,        "name": "Jaime Osborn"      },      {        "id": 1,        "name": "Lawson Kennedy"      },      {        "id": 2,        "name": "Rachel Munoz"      }    ],    "greeting": "Hello, West Young! You have 4 unread messages.",    "favoriteFruit": "banana"  },  {    "_id": "6808c4d6d024cf2e0781cd2a",    "index": 1,    "guid": "04baf441-c7dc-4ae8-8422-d366643ee10e",    "isActive": true,    "balance": "$1,206.09",    "picture": "http://placehold.it/32x32",    "age": 31,    "eyeColor": "brown",    "name": "Booker Guy",    "gender": "male",    "company": "PERMADYNE",    "email": "bookerguy@permadyne.com",    "phone": "+1 (817) 520-3041",    "address": "870 Lincoln Road, Sussex, Montana, 8986",    "about": "Dolor tempor sit laborum culpa aliqua qui ullamco fugiat consequat dolor laborum mollit. Fugiat do eiusmod esse aute id duis et cupidatat consectetur ipsum et. Aliqua ea voluptate consectetur ea Lorem ullamco amet duis cupidatat est laboris ad.\r\n",    "registered": "2019-03-25T04:37:48 -01:00",    "latitude": 17.4238,    "longitude": 123.345833,    "tags": [      "dolor",      "irure",      "aliquip",      "occaecat",      "labore",      "ullamco",      "sit"    ],    "friends": [      {        "id": 0,        "name": "Ayala Mccarty"      },      {        "id": 1,        "name": "Nguyen Brewer"      },      {        "id": 2,        "name": "Manuela Montoya"      }    ],    "greeting": "Hello, Booker Guy! You have 2 unread messages.",    "favoriteFruit": "banana"  },  {    "_id": "6808c4d64b363d5009c68b1b",    "index": 2,    "guid": "f2d81f6e-eff3-47a8-9497-c2e1b70b7bf3",    "isActive": true,    "balance": "$1,528.18",    "picture": "http://placehold.it/32x32",    "age": 33,    "eyeColor": "blue",    "name": "Kelley Walter",    "gender": "female",    "company": "KYAGORO",    "email": "kelleywalter@kyagoro.com",    "phone": "+1 (928) 563-2192",    "address": "991 Railroad Avenue, Tibbie, Louisiana, 1212",    "about": "Officia non nulla adipisicing in. Pariatur est ex est ea excepteur do culpa voluptate. Exercitation veniam qui cillum et dolore laborum eu cupidatat labore velit aliquip ipsum labore elit. Nulla culpa dolor ipsum velit culpa non ad amet aute id non.\r\n",    "registered": "2020-03-01T10:41:13 -01:00",    "latitude": -49.138899,    "longitude": -65.568987,    "tags": [      "culpa",      "adipisicing",      "duis",      "sunt",      "nisi",      "amet",      "duis"    ],    "friends": [      {        "id": 0,        "name": "Christian Barnes"      },      {        "id": 1,        "name": "Wise Mejia"      },      {        "id": 2,        "name": "Patsy Johns"      }    ],    "greeting": "Hello, Kelley Walter! You have 4 unread messages.",    "favoriteFruit": "banana"  },  {    "_id": "6808c4d686be68ebc73ac708",    "index": 3,    "guid": "1717fea3-32b4-41e0-bdcc-2a9c8dd50b25",    "isActive": false,    "balance": "$1,009.66",    "picture": "http://placehold.it/32x32",    "age": 20,    "eyeColor": "brown",    "name": "Travis Newton",    "gender": "male",    "company": "XYLAR",    "email": "travisnewton@xylar.com",    "phone": "+1 (835) 563-3506",    "address": "158 Lott Place, Richmond, Arizona, 8790",    "about": "Consectetur culpa exercitation est anim officia labore cupidatat non consectetur. Cupidatat enim est nisi cupidatat cillum tempor tempor adipisicing nisi id aliqua. Minim consequat nisi irure sit qui aute tempor non exercitation voluptate do. In enim aute cupidatat sunt qui labore in non id.\r\n",    "registered": "2020-08-14T06:00:00 -02:00",    "latitude": -54.434921,    "longitude": 9.908385,    "tags": [      "mollit",      "labore",      "nulla",      "quis",      "elit",      "et",      "cupidatat"    ],    "friends": [      {        "id": 0,        "name": "Lula Reeves"      },      {        "id": 1,        "name": "Wilda Schroeder"      },      {        "id": 2,        "name": "Stephanie Burch"      }    ],    "greeting": "Hello, Travis Newton! You have 7 unread messages.",    "favoriteFruit": "apple"  },  {    "_id": "6808c4d6dd69664fd12f94fb",    "index": 4,    "guid": "1d4ecff9-8874-4e3a-a0f7-0d5b9faecdca",    "isActive": true,    "balance": "$2,894.00",    "picture": "http://placehold.it/32x32",    "age": 26,    "eyeColor": "brown",    "name": "Burks Berger",    "gender": "male",    "company": "MEDESIGN",    "email": "burksberger@medesign.com",    "phone": "+1 (862) 518-2450",    "address": "613 Dwight Street, Wacissa, Massachusetts, 9925",    "about": "Aliqua officia Lorem laboris id pariatur sunt deserunt eu magna irure. Laboris velit sit Lorem adipisicing sit pariatur fugiat nostrud fugiat cillum officia qui. Occaecat eu irure minim adipisicing aute nostrud sit et veniam. Dolor anim aliquip voluptate cupidatat amet. Voluptate veniam commodo pariatur anim quis irure reprehenderit officia elit est ullamco eiusmod. Id sint sit et ipsum cillum veniam nulla consequat consectetur.\r\n",    "registered": "2017-02-28T11:29:49 -01:00",    "latitude": -88.797484,    "longitude": 100.305798,    "tags": [      "velit",      "excepteur",      "ad",      "duis",      "non",      "reprehenderit",      "consequat"    ],    "friends": [      {        "id": 0,        "name": "Weaver Ryan"      },      {        "id": 1,        "name": "Aileen Olsen"      },      {        "id": 2,        "name": "Shauna Carter"      }    ],    "greeting": "Hello, Burks Berger! You have 4 unread messages.",    "favoriteFruit": "banana"  },  {    "_id": "6808c4d6be11c7e3dc076d49",    "index": 5,    "guid": "25b9629a-d292-41ad-a496-4f3e367ae3e9",    "isActive": false,    "balance": "$1,811.79",    "picture": "http://placehold.it/32x32",    "age": 22,    "eyeColor": "brown",    "name": "Ofelia Jarvis",    "gender": "female",    "company": "DATAGENE",    "email": "ofeliajarvis@datagene.com",    "phone": "+1 (921) 468-3689",    "address": "529 Pulaski Street, Conway, New Mexico, 2063",    "about": "Deserunt nulla incididunt ut excepteur esse anim anim in labore. Laborum mollit consectetur ipsum minim fugiat ex Lorem minim Lorem occaecat reprehenderit et. Proident id laborum nulla nulla. Minim laborum laborum eu excepteur ad consequat magna eiusmod dolor consequat magna ea do sit. Amet sint esse culpa amet et.\r\n",    "registered": "2018-01-13T01:15:10 -01:00",    "latitude": 69.070506,    "longitude": -85.67538,    "tags": [      "ullamco",      "amet",      "enim",      "sit",      "sunt",      "nulla",      "culpa"    ],    "friends": [      {        "id": 0,        "name": "Elise Townsend"      },      {        "id": 1,        "name": "Kate Booth"      },      {        "id": 2,        "name": "Hughes Workman"      }    ],    "greeting": "Hello, Ofelia Jarvis! You have 1 unread messages.",    "favoriteFruit": "strawberry"  },  {    "_id": "6808c4d6ebc9e6a7778652de",    "index": 6,    "guid": "fdb629dd-0319-4b52-8c43-7973421c04ad",    "isActive": true,    "balance": "$2,782.46",    "picture": "http://placehold.it/32x32",    "age": 34,    "eyeColor": "green",    "name": "Rosalind Marshall",    "gender": "female",    "company": "APPLIDECK",    "email": "rosalindmarshall@applideck.com",    "phone": "+1 (945) 576-2646",    "address": "137 Dictum Court, Geyserville, Tennessee, 1132",    "about": "Velit anim aute esse consequat Lorem incididunt culpa nisi nisi eiusmod dolor cupidatat eiusmod officia. Eu in cupidatat dolor anim elit sit Lorem qui pariatur aute. Reprehenderit deserunt tempor labore irure aliquip.\r\n",    "registered": "2024-01-24T04:28:35 -01:00",    "latitude": 49.148223,    "longitude": 89.48148,    "tags": [      "et",      "elit",      "ea",      "officia",      "reprehenderit",      "proident",      "eiusmod"    ],    "friends": [      {        "id": 0,        "name": "Little Weaver"      },      {        "id": 1,        "name": "Lindsey Wilcox"      },      {        "id": 2,        "name": "Wagner Underwood"      }    ],    "greeting": "Hello, Rosalind Marshall! You have 6 unread messages.",    "favoriteFruit": "strawberry"  }]




const intvl = setInterval(() => {
    if (i<100) {
        const lvl = Math.floor(Math.random() * 4)
        FifoLogger.log(lvl, i + testStr, bigAttachedObj)
        i++
    } else {
        clearInterval(intvl)
        console.log("ALL ENQUEUE DONE")
        FifoLogger.close( onFifoLoggerClosed )
    }
}, 1)

function onFifoLoggerClosed() {
    console.log("Exit 0");
    process.exit(0)
}
